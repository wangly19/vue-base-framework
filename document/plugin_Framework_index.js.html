<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>JSDoc: Source: plugin/Framework/index.js</title>

        <script src="scripts/prettify/prettify.js"></script>
        <script src="scripts/prettify/lang-css.js"></script>
        <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
        <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
        <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    </head>

    <body>

        <div class="page-content">

            <nav>
                <h3>Pages</h3><ul><li><a href="module-%25E6%25B5%258B%25E8%25AF%2595%25E9%25A1%25B5%25E9%259D%25A21.html">测试页面1</a></li><li><a href="module-%25E6%25B5%258B%25E8%25AF%2595%25E9%25A1%25B5%25E9%259D%25A22.html">测试页面2</a></li></ul><h3>Components</h3><ul><li><a href="module-SVG%25E5%259B%25BE%25E6%25A0%2587%25E7%25BB%2584%25E4%25BB%25B6.html">SVG图标组件</a></li></ul><h3>Classes</h3><ul><li><a href="CreateService.html">CreateService</a></li><li><a href="GenerateModel.html">GenerateModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createHttpService">createHttpService</a></li><li><a href="global.html#getEnv">getEnv</a></li><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#promiseMiddleware">promiseMiddleware</a></li><li><a href="global.html#typeColor">typeColor</a></li><li><a href="global.html#useModels">useModels</a></li><li><a href="global.html#useServices">useServices</a></li></ul>
            </nav>

            <content>

                <div id="main">

                    <h1 class="page-title">Source: plugin/Framework/index.js</h1>

                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import asyncAxiosInstance from '@/plugin/createService'
import currentModels from '@/plugin/createModel'
/**
 * 获取当前开发环境状态
 * @example
 * getEnv()
 * @export { Function } getEnv 当前环境方法【开发环境】【测试环境】【生产环境】
 * @return {String} 当前环境【dev】【test】【pro】
 */
export function getEnv () {
  return process.env.VUE_APP_MODE || 'dev'
}

/**
 * 处理异步任务中间件
 * @param { Promise } promise 异步任务
 * @returns { Array&lt;any> }
 */
export function promiseMiddleware (promise) {
  return promise
    .then(res => [res, null])
    .catch(err => [null, err])
}

/**
 * 获取当前请求接口
 * @example
 * const [success, error] = getService('getPerson')
 * @returns { Object }
 */
export function useServices (name, payload = {}) {
  if (!name) {
    return asyncAxiosInstance
  }
  if (Object.hasOwnProperty.call(asyncAxiosInstance, name)) {
    return promiseMiddleware(asyncAxiosInstance[name](payload))
  } else {
    console.error(`>>> ${name} API不存在，请检查方法名称`)
  }
  return [null, null]
}

/**
 * 允许当前组件使用model数据依赖
 * @param { object } component 当前的Vue组件
 * @param { Array&lt;string> } models 需要注入的模块
 * @param { boolean } isDispatch 是否开启dispatch
 * @returns { object }
 */
export function useModels (component, models, isDispatch = true) {
  const current = []
  currentModels.forEach(item => {
    if (models.includes(item.name)) {
      current.push(item.mixin)
    }
  })
  if (isDispatch &amp;&amp; current.length > 0) {
    current.push(currentModels[0].mixin)
  }
  console.log(current)
  if (component?.mixins) {
    const preMixin = component.mixins
    component.mixins = current.concat(preMixin)
    return component
  }
  component.mixins = [...current]
  console.log(component)
  return component
}
</code></pre>
        </article>
    </section>




                </div>
                <footer>
            Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Dec 20 2020 22:53:52 GMT+0800 (中国标准时间)
                </footer>
            </content>

            <script>
                prettyPrint();
            </script>
            <script src="scripts/linenumber.js"></script>
        </body>
    </html>